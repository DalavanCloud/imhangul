%define name		imhangul
%define ver		@VERSION@
%define rel		1
%define gtk_prefix	@GTK_PREFIX@
%define gtk_binver	@GTK_BINARY_VERSION@

Summary:	Hangul input module for GTK+ 2.0
Summary(ko):	GTK+ 2.0에서 사용할수 있는 한글 입력모듈
Name:		%{name}
Version:	%{ver}
Release:	%{rel}
Group:		User Interface/X
URL:		http://kldp.net/project/imhangul
Copyright:	GPL
Requires:	gtk2
BuildRoot:	/%{_tmppath}/%{name}-%{version}-root
BuildRequires:	gtk2-devel
Source0:	http://download.kldp.net/%{name}/%{name}-%{ver}.tar.gz

%description
Hangul input module for GTK+ 2.0

%description -l ko
GTK+ 2.0에서 사용할수 있는 한글 입력모듈

%prep
%setup
./configure --prefix=%{gtk_prefix} --sysconfdir=%{_sysconfdir}

%build
make

%install
mkdir -p $RPM_BUILD_ROOT%{_sysconfdir}/gtk-2.0
make DESTDIR=$RPM_BUILD_ROOT install

%clean
rm -rf $RPM_BUILD_ROOT

%files
%defattr( 0755, root, root )
%{gtk_prefix}/lib/gtk-2.0/immodules/*.so
%{gtk_prefix}/lib/gtk-2.0/immodules/*.la

%doc COPYING ChangeLog INSTALL TODO

%post
test -x /usr/bin/gtk-query-immodules-2.0 && \
/usr/bin/gtk-query-immodules-2.0 > %{_sysconfdir}/gtk-2.0/gtk.immodules

%postun
test -x /usr/bin/gtk-query-immodules-2.0 && \
/usr/bin/gtk-query-immodules-2.0 > %{_sysconfdir}/gtk-2.0/gtk.immodules

%changelog
* Mon Oct 20 2003 Choe Hwanjin <krisna@people.kldp.org>
- add gtk_binver

* Wed Jan 15 2003 Choe Hwanjin <krisna@kldp.org>
- remove gtk binary version

* 2002. 10. 28. 15:38:10 KST <krisna@kldp.org>
- add gtk_prefix, gtk_binver

* Mon Jul 22 2002 Lee, Kwan-hong <sorcerer@jerimo.org>
- Make RPM package
